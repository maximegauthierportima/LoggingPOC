# Logging POC

## Introduction

This project is a Proof Of Concept related to the Logging Guidelines. \
It was created by Maxime Gauthier on December 2020.

## Contact

If you have any question about this project do not hesitate to contact me maxime.gauthier@portima.com

## Structure

This project was made with the `Aspect-Oriented programming` and the `Single Responsibility Principle` in mind. \
If you want to learn more about those paradigm you can read those two articles [AOP](https://docs.microsoft.com/en-us/archive/msdn-magazine/2014/february/aspect-oriented-programming-aspect-oriented-programming-with-the-realproxy-class) / [Single Responsibility Principle](https://www.toptal.com/software/single-responsibility-principle)

- Attributes: \
  Folder containing the attribute `LoggerAttribute`, this attribute allow us to externalize the logging logic from the controller, it surround the execution of an action in the controller by `Start` and `End`
- BL: \
  Folder containing the business logic file
- Controllers: \
  Folder containing the controllers files
- Enums: \
  Folder containing the enums
  - FlowId: Enum containing the type of flow that the application has. Useful for monitoring and detecting where the issues are coming. ex: login, registration, getOrder, etc...
  - FlowStatus: Enum containing the status of the flow. Feel free to add more status if you have intermediate process
- Filters: \
  Folder containing the filter to catch all exceptions thrown by the application, you need to add this filter in the `Startup` class to make it global

  ```csharp
  services.AddMvc(options => options.Filters.Add<CatchExceptionFilter>());
  ```

  If you want to have multiple filters and to specify a filter for specific `Controller` you can just add the filter at the `Controller` level and avoid the line in the `Startup` class

  ```csharp
    [MyActionFilter]
    public class HomeController : BaseController
  ```

- Helpers: \
  Folder containing the `FlowIdHelper` class used to set the `FlowId` in the `LoggerAttribute` and the `CustomMiddleware`
- Logging: \
  Folder containing the logging service. It centralize the logging framework to allow you to change if needed the framework without changing lots of line of code and it can be injected everywhere by using the Interface `ILogService`
- Logs: \
  Folder containing the logs generated by the `LogService`
- Middlewares: \
  Folder containing the `CustomMiddleware` file. It intercept every invokation of a method, the `LoggerAttribute` intercept action in `Controller` but do not go any further, this middleware is intercepting all the step before and after the action call, allowing developers to intercept each step of a flow
- Models: \
  Folder containing the `ErrorResponse` model used to have a generic way of response for error in the application
